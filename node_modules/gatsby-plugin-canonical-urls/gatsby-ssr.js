"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _react = _interopRequireDefault(require("react"));

var _url = _interopRequireDefault(require("url"));

exports.onRenderBody = function (_ref, pluginOptions) {
  var setHeadComponents = _ref.setHeadComponents,
      _ref$pathname = _ref.pathname,
      pathname = _ref$pathname === void 0 ? "/" : _ref$pathname;

  if (pluginOptions && pluginOptions.siteUrl) {
    var parsedUrl = _url.default.parse(pluginOptions.siteUrl);

    var myUrl = "" + pluginOptions.siteUrl + pathname;
    setHeadComponents([_react.default.createElement("link", {
      rel: "canonical",
      key: myUrl,
      href: myUrl,
      "data-baseprotocol": parsedUrl.protocol,
      "data-basehost": parsedUrl.host
    })]);
  }
};